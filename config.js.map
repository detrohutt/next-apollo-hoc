{"version":3,"sources":["src/config.js"],"names":["defaultConfig","endpoint","cookieSource","apollo","data","guards","auth","login","variables","updateStore","update","next","authToken","logout","Config","constructor","config","reset","assign","config1","config2","Object","forEach","guard1","index1","guard2","index2","name","length","guard","push","add","get"],"mappings":";;;;;AAAA,MAAMA,gBAAgB;AACpBC,YAAU,IADU;AAEpBC,gBAAc,IAFM;AAGpBC,UAAQ;AACNC,UAAM;AADA,GAHY;AAMpBC,UAAQ,EANY;AAOpBC,QAAM;AACJC,WAAO;AACLL,oBAAc,IADT;AAELM,iBAAW,IAFN;AAGLC,mBAAa,IAHR;AAILC,cAAQ,IAJH;AAKLC,YAAM,IALD;AAMLC,iBAAW;AANN,KADH;AASJC,YAAQ;AACNX,oBAAc,IADR;AAENO,mBAAa,IAFP;AAGNE,YAAM;AAHA;AATJ;AAPc,CAAtB;;AAwBA,MAAMG,MAAN,CAAa;;AAGXC,gBAAc;AAAA,SAFdC,MAEc,GAFL,IAEK;;AACZ,SAAKC,KAAL;AACD;;AAEDA,UAAQ;AACN,SAAKD,MAAL,GAAchB,aAAd;AACD;;AAED,SAAOkB,MAAP,CAAcC,OAAd,EAAuBC,OAAvB,EAAgC;AAC9B,QAAID,WAAWA,QAAQb,IAAnB,IAA2Bc,OAA3B,IAAsCA,QAAQd,IAAlD,EAAwD;AACtDa,cAAQb,IAAR,CAAaC,KAAb,GAAqBc,OAAOH,MAAP,CAAcC,QAAQb,IAAR,CAAaC,KAAb,IAAsB,EAApC,EAAwCa,QAAQd,IAAR,CAAaC,KAAb,IAAsB,EAA9D,CAArB;AACA,aAAOa,QAAQd,IAAR,CAAaC,KAApB;;AAEAY,cAAQb,IAAR,CAAaO,MAAb,GAAsBQ,OAAOH,MAAP,CAAcC,QAAQb,IAAR,CAAaO,MAAb,IAAuB,EAArC,EAAyCO,QAAQd,IAAR,CAAaO,MAAb,IAAuB,EAAhE,CAAtB;AACA,aAAOO,QAAQd,IAAR,CAAaO,MAApB;AACD;;AAED,QAAIM,WAAWA,QAAQd,MAAnB,IAA6Be,OAA7B,IAAwCA,QAAQf,MAApD,EAA4D;AAC1Dc,cAAQd,MAAR,CAAeiB,OAAf,CAAuB,CAACC,MAAD,EAASC,MAAT,KAAoB;AACzCJ,gBAAQf,MAAR,CAAeiB,OAAf,CAAuB,CAACG,MAAD,EAASC,MAAT,KAAoB;AACzC,cAAIH,OAAOI,IAAP,KAAgBF,OAAOE,IAA3B,EAAiC;AAC/BR,oBAAQd,MAAR,CAAemB,MAAf,IAAyBH,OAAOH,MAAP,CAAcK,MAAd,EAAsBE,MAAtB,CAAzB;AACA,mBAAOL,QAAQf,MAAR,CAAeqB,MAAf,CAAP;AACD;AACF,SALD;AAMD,OAPD;;AASA,UAAIN,QAAQf,MAAR,CAAeuB,MAAnB,EAA2B;AACzBR,gBAAQf,MAAR,CAAeiB,OAAf,CAAuBO,SAAS;AAC9B,cAAIA,MAAMF,IAAV,EACER,QAAQd,MAAR,CAAeyB,IAAf,CAAoBD,SAAS,EAA7B;AACH,SAHD;AAID;;AAED,aAAOT,QAAQf,MAAf;AACD;;AAED,QAAIc,WAAWC,OAAf,EAAwB;AACtBD,cAAQb,IAAR,GAAee,OAAOH,MAAP,CAAcC,QAAQb,IAAR,IAAgB,EAA9B,EAAkCc,QAAQd,IAAR,IAAgB,EAAlD,CAAf;AACA,aAAOc,QAAQd,IAAf;AACD;;AAEDa,cAAUE,OAAOH,MAAP,CAAcC,OAAd,EAAuBC,OAAvB,CAAV;;AAEA,WAAOD,OAAP;AACD;;AAEDY,MAAIf,MAAJ,EAAY;AACV,SAAKA,MAAL,GAAcF,OAAOI,MAAP,CAAc,KAAKF,MAAnB,EAA2BA,MAA3B,CAAd;AACD;;AAEDgB,QAAM;AACJ,WAAO,KAAKhB,MAAZ;AACD;AAxDU;;kBA2DE,IAAIF,MAAJ,E","file":"config.js","sourcesContent":["const defaultConfig = {\n  endpoint: null,\n  cookieSource: null,\n  apollo: {\n    data: null,\n  },\n  guards: [],\n  auth: {\n    login: {\n      cookieSource: null,\n      variables: null,\n      updateStore: null,\n      update: null,\n      next: null,\n      authToken: null\n    },\n    logout: {\n      cookieSource: null,\n      updateStore: null,\n      next: null\n    }\n  }\n}\n\nclass Config {\n  config = null\n\n  constructor() {\n    this.reset()\n  }\n\n  reset() {\n    this.config = defaultConfig\n  }\n\n  static assign(config1, config2) {\n    if (config1 && config1.auth && config2 && config2.auth) {\n      config1.auth.login = Object.assign(config1.auth.login || {}, config2.auth.login || {})\n      delete config2.auth.login\n\n      config1.auth.logout = Object.assign(config1.auth.logout || {}, config2.auth.logout || {})\n      delete config2.auth.logout\n    }\n\n    if (config1 && config1.guards && config2 && config2.guards) {\n      config1.guards.forEach((guard1, index1) => {\n        config2.guards.forEach((guard2, index2) => {\n          if (guard1.name === guard2.name) {\n            config1.guards[index1] = Object.assign(guard1, guard2)\n            delete config2.guards[index2]\n          }\n        })\n      })\n\n      if (config2.guards.length) {\n        config2.guards.forEach(guard => {\n          if (guard.name)\n            config1.guards.push(guard || [])\n        })\n      }\n\n      delete config2.guards\n    }\n\n    if (config1 && config2) {\n      config1.auth = Object.assign(config1.auth || {}, config2.auth ||Â {})\n      delete config2.auth\n    }\n\n    config1 = Object.assign(config1, config2)\n\n    return config1\n  }\n\n  add(config) {\n    this.config = Config.assign(this.config, config)\n  }\n\n  get() {\n    return this.config\n  }\n}\n\nexport default new Config()"]}