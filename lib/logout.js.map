{"version":3,"sources":["../src/lib/logout.js"],"names":["opts","add","auth","logout","get","delete","source","cookieSource","e","console","error","resetStore","updateStore","getClient","writeQuery","next"],"mappings":";;;;;;AAAA;;AAEA;;;;AACA;;AACA;;;;;;kBAEe,gBAAgBA,IAAhB,EAAsB;AACnC,mBAAOC,GAAP,CAAW,EAAEC,MAAM,EAAEC,QAAQH,IAAV,EAAR,EAAX;AACAA,SAAO,iBAAOI,GAAP,GAAaF,IAAb,CAAkBC,MAAzB;;AAEA,MAAI;AACF,uBAAQE,MAAR,gCAAuC,EAAEC,QAAQN,KAAKO,YAAf,EAAvC;AACD,GAFD,CAEE,OAAOC,CAAP,EAAU;AACVC,YAAQC,KAAR,CAAcF,CAAd;AACA,WAAO,IAAP;AACD;;AAED,mBAAOG,UAAP;;AAEA,MAAIX,KAAKY,WAAT,EAAsB;AACpB,QAAI;AACF,uBAAOC,SAAP,GAAmBC,UAAnB,CAA8Bd,KAAKY,WAAL,CAAiB,IAAjB,CAA9B;AACD,KAFD,CAEE,OAAOJ,CAAP,EAAU;AACVC,cAAQC,KAAR,CAAcF,CAAd;AACD;AACF;;AAED,MAAIR,KAAKe,IAAT,EAAe;AACb,QAAI;AACFf,WAAKe,IAAL;AACD,KAFD,CAEE,OAAOP,CAAP,EAAU;AACVC,cAAQC,KAAR,CAAcF,CAAd;AACD;AACF;;AAED,SAAO,IAAP;AACD,C","file":"logout.js","sourcesContent":["import { Cookies } from 'js-cookies'\n\nimport config from '../config'\nimport { CONST_AUTHTOKEN_COOKIE } from './const'\nimport apollo from '../apollo'\n\nexport default async function (opts) {\n  config.add({ auth: { logout: opts } })\n  opts = config.get().auth.logout\n\n  try {\n    Cookies.delete(CONST_AUTHTOKEN_COOKIE, { source: opts.cookieSource })\n  } catch (e) {\n    console.error(e)\n    return null\n  }\n\n  apollo.resetStore()\n\n  if (opts.updateStore) {\n    try {\n      apollo.getClient().writeQuery(opts.updateStore(null))\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  if (opts.next) {\n    try {\n      opts.next()\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  return true\n}"]}